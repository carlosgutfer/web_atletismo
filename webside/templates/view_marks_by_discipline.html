{% extends "base.html" %}{% block title %} Filtrado marcas por pruebas {% endblock %} {% block content%}
 <head>
 	<title>FILTRADO MARCAS POR PRUEBAS </title>
 </head>

{% if tipo == 1 %}
<body onload="speed()" >
{% elif tipo == 2 %}
<body onload="meters()" >
{% elif tipo == 3 %}
<body onload="long()" >
{% else %}
<body>
{% endif %}
 	<form  method = "POST" >
				<br>
                <select id = "tipo_prueba" name  = "tipo_prueba"  onchange="select_discipline()" >
                    <option>SECTORES</option>
                    <option>Fondo / Medio Fondo</option>
                    <option>Lanzamientos</option>
                    <option>Saltos</option>
                    <option>Vallas</option>
                    <option>Velocidad </option>
                </select>
                <br><br>
                <select id = "Velocidad" name  = "Velocidad" style="display:none;" >
                    <option>80 </option>
                    <option>100</option>
                    <option>300</option>
                </select>
                <select id = "Vallas" name  = "Vallas" style="display:none;" >
                    <option>80v</option>
                    <option>100v</option>
                    <option>300v</option>
                </select>
                <select id = "FondoMedioFondo" name  = "FondoMedioFondo" style="display:none;" >
                    <option>600 </option>
                    <option>1000</option>
                    <option>3000</option>
                    <option>milla</option>
                </select>
                <select id = "Lanzamientos" name  = "Lanzamientos" style="display:none;" >
                    <option>Disco</option>
                    <option>Jabalina</option>
                    <option>Peso</option>
                    <option>Martillo</option>
                </select>
                <select id = "Saltos" name  = "Saltos" style="display:none;" >
                    <option>Altura</option>
                    <option>Longitud</option>
                    <option>Pertiga</option>
                    <option>Triple</option>
                </select>	
                {% if User_register.admin %}
                <br>
				<label for="mark" id="informacion" name="informacion">Introduce el codigo de usuario que deseas buscar </label>
				<input type="text" class="form-control" id = "cod_usuario" name = "cod_usuario" />
				<br>
                {% endif %}
				<br>
				<button class="btn btn-primary"> BUSCAR </button>
                <div class="container">
                    <canvas id="lineChart"  > </canvas>
                </div>
	</form>		
</body>	

<script>


    function meters()
    {
        var ctx = document.getElementById("lineChart").getContext("2d");
        var lineChart = new Chart(ctx, {
        type: "line",
        data: 
        {
            labels:{{date | safe}},
            datasets: [
                {
                    label: "MARCAS",
                    data: {{time | safe}},
                    fill: false,
                    borderCOlor: "rgb(75, 192, 192)",
                    lineTension: 0.1
                }
            ]
        },
        options:
        {
            Responsive: false
        }
        });
    }

    function long()
    {
        var ctx = document.getElementById("lineChart").getContext("2d");
        var maxmin = {{maxmin | safe}}
        var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: {{date | safe}},
            datasets: [
                {
                    label: 'Tiempos',
                    data: {{time | safe}},
                    fill: false,
                    borderCOlor: "rgb(75, 192, 192)",
                    lineTension: 0.1
                }
            ]
        },
        options: {
                Responsive: false,
                scales: {
                    yAxes: [{
                        type: 'time',
                        time: {
                            bounds: 'data',
                            parser: 'hh:mm:ss.SSSSSS',
                            unit: 'minute',
                            unitStepSize: 0.03,
                            min: maxmin[0],
                            max: maxmin[1],
                            displayFormats: {
                                'minute': 'mm:ss'
                            }
                        }
                    }]
                }
            }
        });
    } 

    function speed(){
        var ctx = document.getElementById("lineChart").getContext("2d")
        var tiempo = {{time | safe}}
        var fecha = {{date | safe}}
        var maxmin = {{maxmin | safe}}
        var myChart = new Chart(ctx, {
        type: 'line',
        data: 
        {
            datasets: [
                {
                    data: tiempo,
                    label: "MARCAS",
                    fill: false,
                    borderCOlor: "rgb(75, 192, 192)",
                    lineTension: 0.1
                }
            ],
            labels: fecha
        },
        options: {
                Responsive: false,
                scales: {
                    yAxes: [{
                        type: 'time',
                        time: {
                            parser: 'hh:mm:ss.SS',
                            unit: 'seconds',
                            unitStepSize: 0.05,
                            min: maxmin[0],
                            max: maxmin[1],
                            displayFormats: {
                                'seconds': 'ss.SS'
                            }
                        }
                    }]
                },
                Responsive: false
            }
        });
    } 
</script>

{% endblock %}
