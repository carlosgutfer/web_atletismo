{% extends "base.html" %}{% block title %} Filtrado marcas por pruebas {% endblock %} {% block content%}
 <head>
 	<title>FILTRADO MARCAS POR PRUEBAS </title>
 </head>

{% if tipo == 1 %}
<body onload="speed()" >
{% elif tipo == 2 %}
<body onload="meters()" >
{% elif tipo == 3 %}
<body onload="long()" >
{% else %}
<body>
{% endif %}
 	<form  method = "POST" >
				<br>
                <select id = "tipo_prueba" name  = "tipo_prueba"  onchange="select_discipline()" >
                    <option>SECTORES</option>
                    <option>Fondo / Medio Fondo</option>
                    <option>Lanzamientos</option>
                    <option>Saltos</option>
                    <option>Vallas</option>
                    <option>Velocidad </option>
                </select>
                <br><br>
                <select id = "Velocidad" name  = "Velocidad" style="display:none;" >
                    <option>80 </option>
                    <option>100</option>
                    <option>300</option>
                </select>
                <select id = "Vallas" name  = "Vallas" style="display:none;" >
                    <option>80v</option>
                    <option>100v</option>
                    <option>300v</option>
                </select>
                <select id = "FondoMedioFondo" name  = "FondoMedioFondo" style="display:none;" >
                    <option>600 </option>
                    <option>1000</option>
                    <option>3000</option>
                    <option>milla</option>
                </select>
                <select id = "Lanzamientos" name  = "Lanzamientos" style="display:none;" >
                    <option>Disco</option>
                    <option>Jabalina</option>
                    <option>Peso</option>
                    <option>Martillo</option>
                </select>
                <select id = "Saltos" name  = "Saltos" style="display:none;" >
                    <option>Altura</option>
                    <option>Longitud</option>
                    <option>Pertiga</option>
                    <option>Triple</option>
                </select>	
                    <br><br>
                    <select class="list-group" multiple id="ids" name = "ids">
                        {% for x  in all_user: %}
                          <option  value = "{{x.id}}">{{x.name}} {{x.surname}}</option>
                        {% endfor %}
                    </select>
                <br><br>
				<br>
				<button class="btn btn-primary"> BUSCAR </button>
                <div class="container">
                    <canvas id="lineChart"  > </canvas>
                </div>
	</form>		
</body>	

<script>
    function getRandomInt(max) {
     return Math.floor(Math.random() * max);
    }


    function long()
    {
        var ctx = document.getElementById("lineChart").getContext("2d")
        var lineChartDatasets = []
        var lineChartlabels = []
        var lineChartName = []
        const statRecords = []
        let count = 0;
        var tiempo = {{time | safe}}
        var fecha = {{date | safe}}
        var names = {{names | safe}}    
        var maxmin = {{maxmin | safe}}

        names.forEach(n => lineChartName.push(n))

        fecha.forEach(f => f.forEach(ff => lineChartlabels.push(ff)))

        lineChartlabels.sort()
        for(var i = 0; i < fecha.length;++i)
        {
            const record = []
            for(var j = 0; j < fecha[i].length; ++j){
                record.push({x:fecha[i][j],y:tiempo[i][j]})
            }
            statRecords.push(record)
        }

        tiempo.forEach(t => 
        lineChartDatasets.push({
                label: lineChartName[count],
                data: statRecords[count++],
                borderColor: "rgb(" + getRandomInt(256) + "," + getRandomInt(256) +" ,"+ getRandomInt(256) +")",
                fill: false,
                pointRadius: 5.5
            }
            ))

        var myChart = new Chart(ctx, {
        type: 'line',
        data:{
                datasets: lineChartDatasets,
                labels:lineChartlabels
            },
        options: {
                Responsive: false,
                scales: {
                    yAxes: [{
                        type: 'time',
                        time: {
                            bounds: 'data',
                            parser: 'hh:mm:ss.SSSSSS',
                            unit: 'minute',
                            unitStepSize: 0.10,
                            min: '00:01:00',
                            max: '00:03:00',
                            displayFormats: {
                                'minute': 'mm:ss'
                            }
                        }
                    }]
                }
            }
        });
    } 

    function speed(){
        var ctx = document.getElementById("lineChart").getContext("2d")
        var tiempo = {{time | safe}}
        var ctx = document.getElementById("lineChart").getContext("2d")
        var lineChartDatasets = []
        var lineChartlabels = []
        var lineChartName = []
        const statRecords = []
        let count = 0;
        var tiempo = {{time | safe}}
        var fecha = {{date | safe}}
        var names = {{names | safe}}    
        var maxmin = {{maxmin | safe}}

        names.forEach(n => lineChartName.push(n))

        fecha.forEach(f => f.forEach(ff => lineChartlabels.push(ff)))

        lineChartlabels.sort()
        for(var i = 0; i < fecha.length;++i)
        {
            const record = []
            for(var j = 0; j < fecha[i].length; ++j){
                record.push({x:fecha[i][j],y:tiempo[i][j]})
            }
            statRecords.push(record)
        }

        tiempo.forEach(t => 
        lineChartDatasets.push({
                label: lineChartName[count],
                data: statRecords[count++],
                borderColor: "rgb(" + getRandomInt(256) + "," + getRandomInt(256) +" ,"+ getRandomInt(256) +")",
                fill: false,
                pointRadius: 5.5
            }
            ))

        var myChart = new Chart(ctx, {
        type: 'line',
        data:{
                datasets: lineChartDatasets,
                labels:lineChartlabels
            },
        options: {
                Responsive: false,
                scales: {
                    yAxes: [{
                        type: 'time',
                        time: {
                            parser: 'hh:mm:ss.SS',
                            unit: 'seconds',
                            unitStepSize: 0.50,
                            min: '00:00:10.00',
                            max: '00:00:19.00',
                            displayFormats: {
                                'seconds': 'ss.SS'
                            }
                        }
                    }]
                },
                Responsive: false
            }
        });
    }

    function meters()
    {
    var ctx = document.getElementById("lineChart").getContext("2d")
    var lineChartDatasets = []
    var lineChartName = []
    var lineChartlabels = {{labels | safe}}
    var tiempo = {{time | safe}}
    var fecha = {{date | safe}}
    var names = {{names | safe}}    
    
    const statRecords = []
    let count = 0;

    names.forEach(n => lineChartName.push(n))

    for(var i = 0; i < tiempo.length;++i)
    {
        const record = []
       for(var j = 0; j < tiempo[i].length; ++j){
            record.push({x:fecha[i][j], y:tiempo[i][j]})
       }
       statRecords.push(record)
    }
    
    tiempo.forEach(t => 
    lineChartDatasets.push({
            label: lineChartName[count],
            data: statRecords[count++],
            borderColor: "rgb(" + getRandomInt(256) + "," + getRandomInt(256) +" ,"+ getRandomInt(256) +")",
            fill: false,
            pointRadius: 5.5
        }
        ))

        var myChart = new Chart(ctx, {
        type: 'line',
        data:{
                datasets: lineChartDatasets,
                labels:lineChartlabels
            },
        options:
            {
                Responsive: false
            }
        });
    }
</script>

<script>
 function select_discipline() {
    if (document.getElementById("tipo_prueba").value == "Velocidad")
    {
         document.getElementById("Velocidad").style.display = "block"
         document.getElementById("Vallas").style.display = "none"
         document.getElementById("FondoMedioFondo").style.display = "none"
         document.getElementById("Lanzamientos").style.display = "none"
         document.getElementById("Saltos").style.display = "none"
    }
    else if (document.getElementById("tipo_prueba").value == "Vallas")
    {
         document.getElementById("Velocidad").style.display = "none"
         document.getElementById("Vallas").style.display = "block"
         document.getElementById("FondoMedioFondo").style.display = "none"
         document.getElementById("Lanzamientos").style.display = "none"
         document.getElementById("Saltos").style.display = "none"
    }
    else if (document.getElementById("tipo_prueba").value == "Fondo / Medio Fondo")
    {
         document.getElementById("Velocidad").style.display = "none"
         document.getElementById("Vallas").style.display = "none"
         document.getElementById("FondoMedioFondo").style.display = "block"
         document.getElementById("Lanzamientos").style.display = "none"
         document.getElementById("Saltos").style.display = "none"
    }  
    else if (document.getElementById("tipo_prueba").value == "Lanzamientos")
    {
         document.getElementById("Velocidad").style.display = "none"
         document.getElementById("Vallas").style.display = "none"
         document.getElementById("FondoMedioFondo").style.display = "none"
         document.getElementById("Lanzamientos").style.display = "block"
         document.getElementById("Saltos").style.display = "none"
    }   
    else if (document.getElementById("tipo_prueba").value == "Saltos")
    {
         document.getElementById("Velocidad").style.display = "none"
         document.getElementById("Vallas").style.display = "none"
         document.getElementById("FondoMedioFondo").style.display = "none"
         document.getElementById("Lanzamientos").style.display = "none"
         document.getElementById("Saltos").style.display = "block"
    }      
 }



</script>
{% endblock %}
